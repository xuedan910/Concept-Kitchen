!function(window,document,location,$,undefined){"use strict";/* Bez v1.0.10-g5ae0136
 * http://github.com/rdallasgray/bez
 *
 * A plugin to convert CSS3 cubic-bezier co-ordinates to rbjQuer-compatible easing functions
 *
 * With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths
 * See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html
 *
 * Copyright 2011 Robert Dallas Gray. All rights reserved.
 * Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt
 */
function bez(e){var t="bez_"+$.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof $.easing[t]){var a=function(e,t){var a=[null,null],o=[null,null],n=[null,null],s=function(s,i){return n[i]=3*e[i],o[i]=3*(t[i]-e[i])-n[i],a[i]=1-n[i]-o[i],s*(n[i]+s*(o[i]+s*a[i]))},i=function(e){return n[0]+e*(2*o[0]+3*a[0]*e)},r=function(e){for(var t,a=e,o=0;++o<14&&(t=s(a,0)-e,!(Math.abs(t)<.001));)a-=t/i(a);return a};return function(e){return s(r(e),1)}};$.easing[t]=function(t,o,n,s,i){return s*a([e[0],e[1]],[e[2],e[3]])(o/i)+n}}return t}function noop(){}function minMaxLimit(e,t,a){return Math.max(isNaN(t)?-(1/0):t,Math.min(isNaN(a)?1/0:a,e))}function readTransform(e){return e.match(/ma/)&&e.match(/-?\d+(?!d)/g)[e.match(/3d/)?12:4]}function readPosition(e){return CSS3?+readTransform(e.css("transform")):+e.css("left").replace("px","")}function getTranslate(e,t){var a={};return CSS3?a.transform="translate3d("+(e+(t?.001:0))+"px,0,0)":a.left=e,a}function getDuration(e){return{"transition-duration":e+"ms"}}function numberFromMeasure(e,t){return+String(e).replace(t||"px","")||undefined}function numberFromPercent(e){return/%$/.test(e)&&numberFromMeasure(e,"%")}function numberFromWhatever(e,t){return numberFromPercent(e)/100*t||numberFromMeasure(e)}function measureIsValid(e){return(!!numberFromMeasure(e)||!!numberFromMeasure(e,"%"))&&e}function getPosByIndex(e,t,a,o){return(e-(o||0))*(t+(a||0))}function getIndexByPos(e,t,a,o){return-Math.round(e/(t+(a||0))-(o||0))}function bindTransitionEnd(e){var t=e.data();if(!t.tEnd){var a=e[0],o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};a.addEventListener(o[Modernizr.prefixed("transition")],function(e){t.tProp&&e.propertyName.match(t.tProp)&&t.onEndFn()},!1),t.tEnd=!0}}function afterTransition(e,t,a,o){var n,s=e.data();s&&(s.onEndFn=function(){n||(n=!0,clearTimeout(s.tT),a())},s.tProp=t,clearTimeout(s.tT),s.tT=setTimeout(function(){s.onEndFn()},1.5*o),bindTransitionEnd(e))}function stop(e,t,a){if(e.length){var o=e.data();CSS3?(e.css(getDuration(0)),o.onEndFn=noop,clearTimeout(o.tT)):e.stop();var n=getNumber(t,function(){return readPosition(e)});return e.css(getTranslate(n,a)),n}}function getNumber(){for(var e,t=0,a=arguments.length;a>t&&(e=t?arguments[t]():arguments[t],"number"!=typeof e);t++);return e}function edgeResistance(e,t){return Math.round(e+(t-e)/1.5)}function getProtocol(){return getProtocol.p=getProtocol.p||("https:"===location.protocol?"https://":"http://"),getProtocol.p}function parseHref(e){var t=document.createElement("a");return t.href=e,t}function findVideoId(e,t){if("string"!=typeof e)return e;e=parseHref(e);var a,o;if(e.host.match(/youtube\.com/)&&e.search){if(a=e.search.split("v=")[1]){var n=a.indexOf("&");-1!==n&&(a=a.substring(0,n)),o="youtube"}}else e.host.match(/youtube\.com|youtu\.be/)?(a=e.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),o="youtube"):e.host.match(/vimeo\.com/)&&(o="vimeo",a=e.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return a&&o||!t||(a=e.href,o="custom"),a?{id:a,type:o,s:e.search.replace(/^\?/,"")}:!1}function getVideoThumbs(e,t,a){var o,n,s=e.video;return"youtube"===s.type?(n=getProtocol()+"img.youtube.com/vi/"+s.id+"/default.jpg",o=n.replace(/\/default.jpg$/,"/hqdefault.jpg"),e.thumbsReady=!0):"vimeo"===s.type?$.ajax({url:getProtocol()+"vimeo.com/api/v2/video/"+s.id+".json",dataType:"jsonp",success:function(o){e.thumbsReady=!0,updateData(t,{img:o[0].thumbnail_large,thumb:o[0].thumbnail_small},e.i,a)}}):e.thumbsReady=!0,{img:o,thumb:n}}function updateData(e,t,a,o){for(var n=0,s=e.length;s>n;n++){var i=e[n];if(i.i===a&&i.thumbsReady){var r={videoReady:!0};r[STAGE_FRAME_KEY]=r[NAV_THUMB_FRAME_KEY]=r[NAV_DOT_FRAME_KEY]=!1,o.splice(n,1,$.extend({},i,r,t));break}}}function getDataFromHtml(e){function t(e,t,o){var n=e.children("img").eq(0),s=e.attr("href"),i=e.attr("src"),r=n.attr("src"),l=t.video,d=o?findVideoId(s,l===!0):!1;d?s=!1:d=l,a(e,n,$.extend(t,{video:d,img:t.img||s||i||r,thumb:t.thumb||r||i||s}))}function a(e,t,a){var o=a.thumb&&a.img!==a.thumb,n=numberFromMeasure(a.width||e.attr("width")),s=numberFromMeasure(a.height||e.attr("height"));$.extend(a,{width:n,height:s,thumbratio:getRatio(a.thumbratio||numberFromMeasure(a.thumbwidth||t&&t.attr("width")||o||n)/numberFromMeasure(a.thumbheight||t&&t.attr("height")||o||s))})}var o=[];return e.children().each(function(){var e=$(this),n=optionsToLowerCase($.extend(e.data(),{id:e.attr("id")}));if(e.is("a, img"))t(e,n,!0);else{if(e.is(":empty"))return;a(e,null,$.extend(n,{html:this,_html:e.html()}))}o.push(n)}),o}function isHidden(e){return 0===e.offsetWidth&&0===e.offsetHeight}function isDetached(e){return!$.contains(document.documentElement,e)}function waitFor(e,t,a){e()?t():setTimeout(function(){waitFor(e,t)},a||100)}function setHash(e){location.replace(location.protocol+"//"+location.host+location.pathname.replace(/^\/?/,"/")+location.search+"#"+e)}function fit(e,t,a){var o=e.data(),n=o.measures;if(n&&(!o.l||o.l.W!==n.width||o.l.H!==n.height||o.l.r!==n.ratio||o.l.w!==t.w||o.l.h!==t.h||o.l.m!==a)){var s=n.width,i=n.height,r=t.w/t.h,l=n.ratio>=r,d="scaledown"===a,u="contain"===a,c="cover"===a;l&&(d||u)||!l&&c?(s=minMaxLimit(t.w,0,d?s:1/0),i=s/n.ratio):(l&&c||!l&&(d||u))&&(i=minMaxLimit(t.h,0,d?i:1/0),s=i*n.ratio),e.css({width:Math.ceil(s),height:Math.ceil(i),marginLeft:Math.floor(-s/2),marginTop:Math.floor(-i/2)}),o.l={W:n.width,H:n.height,r:n.ratio,w:t.w,h:t.h,m:a}}return!0}function setStyle(e,t){var a=e[0];a.styleSheet?a.styleSheet.cssText=t:e.html(t)}function findShadowEdge(e,t,a){return t===a?!1:t>=e?"left":e>=a?"right":"left right"}function getIndexFromHash(e,t,a,o){if(!a)return!1;if(!isNaN(e))return e-(o?0:1);for(var n,s=0,i=t.length;i>s;s++){var r=t[s];if(r.id===e){n=s;break}}return n}function smartClick(e,t,a){a=a||{},e.each(function(){var e,o=$(this),n=o.data();n.clickOn||(n.clickOn=!0,$.extend(touch(o,{onStart:function(t){e=t,(a.onStart||noop).call(this,t)},onMove:a.onMove||noop,onTouchEnd:a.onTouchEnd||noop,onEnd:function(a){a.moved||t.call(this,e)}}),{noMove:!0}))})}function div(e,t){return'<div class="'+e+'">'+(t||"")+"</div>"}function shuffle(e){for(var t=e.length;t;){var a=Math.floor(Math.random()*t--),o=e[t];e[t]=e[a],e[a]=o}return e}function clone(e){return"[object Array]"==Object.prototype.toString.call(e)&&$.map(e,function(e){return $.extend({},e)})}function lockScroll(e,t){$WINDOW.scrollLeft(e).scrollTop(t)}function optionsToLowerCase(e){if(e){var t={};return $.each(e,function(e,a){t[e.toLowerCase()]=a}),t}}function getRatio(e){if(e){var t=+e;return isNaN(t)?(t=e.split("/"),+t[0]/+t[1]||undefined):t}}function stopEvent(e,t){e.preventDefault(),t&&e.stopPropagation()}function getDirectionSign(e){return e?">":"<"}function slide(e,t){var a=e.data(),o=Math.round(t.pos),n=function(){a.sliding=!1,(t.onEnd||noop)()};"undefined"!=typeof t.overPos&&t.overPos!==t.pos&&(o=t.overPos,n=function(){slide(e,$.extend({},t,{overPos:t.pos,time:Math.max(TRANSITION_DURATION,t.time/2)}))});var s=$.extend(getTranslate(o,t._001),t.width&&{width:t.width});a.sliding=!0,CSS3?(e.css($.extend(getDuration(t.time),s)),t.time>10?afterTransition(e,"transform",n,t.time):n()):e.stop().animate(s,t.time,BEZIER,n)}function fade(e,t,a,o,n,s){var i="undefined"!=typeof s;if(i||(n.push(arguments),Array.prototype.push.call(arguments,n.length),!(n.length>1))){e=e||$(e),t=t||$(t);var r=e[0],l=t[0],d="crossfade"===o.method,u=function(){if(!u.done){u.done=!0;var e=(i||n.shift())&&n.shift();e&&fade.apply(this,e),(o.onEnd||noop)(!!e)}},c=o.time/(s||1);a.removeClass(fadeRearClass+" "+fadeFrontClass),e.stop().addClass(fadeRearClass),t.stop().addClass(fadeFrontClass),d&&l&&e.fadeTo(0,0),e.fadeTo(d?c:0,1,d&&u),t.fadeTo(c,0,u),r&&d||l||u()}}function extendEvent(e){var t=(e.touches||[])[0]||e;e._x=t.pageX,e._y=t.clientY,e._now=$.now()}function touch(e,t){function a(e){return d=$(e.target),w.checked=h=p=m=!1,r||w.flow||e.touches&&e.touches.length>1||e.which>1||lastEvent&&lastEvent.type!==e.type&&preventEvent||(h=t.select&&d.is(t.select,v))?h:(c="touchstart"===e.type,p=d.is("a, a *",v),u=w.control,f=w.noMove||w.noSwipe||u?16:w.snap?0:4,extendEvent(e),l=lastEvent=e,moveEventType=e.type.replace(/down|start/,"move").replace(/Down/,"Move"),(t.onStart||noop).call(v,e,{control:u,$target:d}),r=w.flow=!0,void((!c||w.go)&&stopEvent(e)))}function o(e){if(e.touches&&e.touches.length>1||MS_POINTER&&!e.isPrimary||moveEventType!==e.type||!r)return r&&n(),void(t.onTouchEnd||noop)();extendEvent(e);var a=Math.abs(e._x-l._x),o=Math.abs(e._y-l._y),s=a-o,i=(w.go||w.x||s>=0)&&!w.noSwipe,d=0>s;c&&!w.checked?(r=i)&&stopEvent(e):(stopEvent(e),(t.onMove||noop).call(v,e,{touch:c})),!m&&Math.sqrt(Math.pow(a,2)+Math.pow(o,2))>f&&(m=!0),w.checked=w.checked||i||d}function n(e){(t.onTouchEnd||noop)();var a=r;w.control=r=!1,a&&(w.flow=!1),!a||p&&!w.checked||(e&&stopEvent(e),preventEvent=!0,clearTimeout(preventEventTimeout),preventEventTimeout=setTimeout(function(){preventEvent=!1},1e3),(t.onEnd||noop).call(v,{moved:m,$target:d,control:u,touch:c,startEvent:l,aborted:!e||"MSPointerCancel"===e.type}))}function s(){w.flow||setTimeout(function(){w.flow=!0},10)}function i(){w.flow&&setTimeout(function(){w.flow=!1},TOUCH_TIMEOUT)}var r,l,d,u,c,h,p,f,m,v=e[0],w={};return MS_POINTER?(v[ADD_EVENT_LISTENER]("MSPointerDown",a,!1),document[ADD_EVENT_LISTENER]("MSPointerMove",o,!1),document[ADD_EVENT_LISTENER]("MSPointerCancel",n,!1),document[ADD_EVENT_LISTENER]("MSPointerUp",n,!1)):(v[ADD_EVENT_LISTENER]&&(v[ADD_EVENT_LISTENER]("touchstart",a,!1),v[ADD_EVENT_LISTENER]("touchmove",o,!1),v[ADD_EVENT_LISTENER]("touchend",n,!1),document[ADD_EVENT_LISTENER]("touchstart",s,!1),document[ADD_EVENT_LISTENER]("touchend",i,!1),document[ADD_EVENT_LISTENER]("touchcancel",i,!1),window[ADD_EVENT_LISTENER]("scroll",i,!1)),e.on("mousedown",a),$DOCUMENT.on("mousemove",o).on("mouseup",n)),e.on("click","a",function(e){console.log("test"),w.checked&&stopEvent(e)}),w}function moveOnTouch(e,t){function a(a,o){T=!0,i=r=a._x,h=a._now,c=[[h,i]],l=d=y.noMove||o?0:stop(e,(t.getPos||noop)(),t._001),(t.onStart||noop).call(C,a)}function o(e,t){f=y.min,m=y.max,v=y.snap,w=e.altKey,T=_=!1,g=t.control,g||S.sliding||a(e)}function n(o,n){y.noSwipe||(T||a(o),r=o._x,c.push([o._now,r]),d=l-(i-r),u=findShadowEdge(d,f,m),f>=d?d=edgeResistance(d,f):d>=m&&(d=edgeResistance(d,m)),y.noMove||(e.css(getTranslate(d,t._001)),_||(_=!0,n.touch||MS_POINTER||e.addClass(grabbingClass)),(t.onMove||noop).call(C,o,{pos:d,edge:u})))}function s(o){if(!y.noSwipe||!o.moved){T||a(o.startEvent,!0),o.touch||MS_POINTER||e.removeClass(grabbingClass),p=$.now();for(var n,s,i,u,h,g,_,S,E,x=p-TOUCH_TIMEOUT,I=null,b=TRANSITION_DURATION,A=t.friction,F=c.length-1;F>=0;F--){if(n=c[F][0],s=Math.abs(n-x),null===I||i>s)I=n,u=c[F][1];else if(I===x||s>i)break;i=s}_=minMaxLimit(d,f,m);var M=u-r,N=M>=0,D=p-I,j=D>TOUCH_TIMEOUT,R=!j&&d!==l&&_===d;v&&(_=minMaxLimit(Math[R?N?"floor":"ceil":"round"](d/v)*v,f,m),f=m=_),R&&(v||_===d)&&(E=-(M/D),b*=minMaxLimit(Math.abs(E),t.timeLow,t.timeHigh),h=Math.round(d+E*b/A),v||(_=h),(!N&&h>m||N&&f>h)&&(g=N?f:m,S=h-g,v||(_=g),S=minMaxLimit(_+.03*S,g-50,g+50),b=Math.abs((d-S)/(E/A)))),b*=w?10:1,(t.onEnd||noop).call(C,$.extend(o,{moved:o.moved||j&&v,pos:d,newPos:_,overPos:S,time:b}))}}var i,r,l,d,u,c,h,p,f,m,v,w,g,_,T,C=e[0],S=e.data(),y={};return y=$.extend(touch(t.$wrap,{onStart:o,onMove:n,onTouchEnd:t.onTouchEnd,onEnd:s,select:t.select}),y)}function wheel(e,t){var a,o,n,s=e[0],i={prevent:{}};return s[ADD_EVENT_LISTENER]&&s[ADD_EVENT_LISTENER](WHEEL,function(e){var s=e.wheelDeltaY||-1*e.deltaY||0,r=e.wheelDeltaX||-1*e.deltaX||0,l=Math.abs(r)>Math.abs(s),d=getDirectionSign(0>r),u=o===d,c=$.now(),h=TOUCH_TIMEOUT>c-n;o=d,n=c,l&&i.ok&&(!i.prevent[d]||a)&&(stopEvent(e,!0),a&&u&&h||(t.shift&&(a=!0,clearTimeout(i.t),i.t=setTimeout(function(){a=!1},SCROLL_LOCK_TIMEOUT)),(t.onEnd||noop)(e,t.shift?d:r)))},!1),i}function calculateIndexes(){$.each($.twoj_slideshow.instances,function(e,t){t.index=e})}function addInstance(e){$.twoj_slideshow.instances.push(e),calculateIndexes()}function hideInstance(e){$.twoj_slideshow.instances.splice(e.index,1),calculateIndexes()}var _twoj_slideshowClass="twoj_slideshow",_fullscreenClass="fullscreen",wrapClass=_twoj_slideshowClass+"__wrap",wrapCss2Class=wrapClass+"--css2",wrapCss3Class=wrapClass+"--css3",wrapVideoClass=wrapClass+"--video",wrapFadeClass=wrapClass+"--fade",wrapSlideClass=wrapClass+"--slide",wrapNoControlsClass=wrapClass+"--no-controls",wrapNoShadowsClass=wrapClass+"--no-shadows",wrapPanYClass=wrapClass+"--pan-y",wrapRtlClass=wrapClass+"--rtl",wrapOnlyActiveClass=wrapClass+"--only-active",wrapNoCaptionsClass=wrapClass+"--no-captions",wrapToggleArrowsClass=wrapClass+"--toggle-arrows",stageClass=_twoj_slideshowClass+"__stage",stageFrameClass=stageClass+"__frame",stageFrameVideoClass=stageFrameClass+"--video",stageShaftClass=stageClass+"__shaft",grabClass=_twoj_slideshowClass+"__grab",pointerClass=_twoj_slideshowClass+"__pointer",arrClass=_twoj_slideshowClass+"__arr",arrDisabledClass=arrClass+"--disabled",arrPrevClass=arrClass+"--prev",arrNextClass=arrClass+"--next",arrArrClass=arrClass+"__arr",navClass=_twoj_slideshowClass+"__nav",navWrapClass=navClass+"-wrap",navShaftClass=navClass+"__shaft",navDotsClass=navClass+"--dots",navThumbsClass=navClass+"--thumbs",navFrameClass=navClass+"__frame",navFrameDotClass=navFrameClass+"--dot",navFrameThumbClass=navFrameClass+"--thumb",fadeClass=_twoj_slideshowClass+"__fade",fadeFrontClass=fadeClass+"-front",fadeRearClass=fadeClass+"-rear",shadowClass=_twoj_slideshowClass+"__shadow",shadowsClass=shadowClass+"s",shadowsLeftClass=shadowsClass+"--left",shadowsRightClass=shadowsClass+"--right",activeClass=_twoj_slideshowClass+"__active",selectClass=_twoj_slideshowClass+"__select",hiddenClass=_twoj_slideshowClass+"--hidden",fullscreenClass=_twoj_slideshowClass+"--fullscreen",fullscreenIconClass=_twoj_slideshowClass+"__fullscreen-icon",errorClass=_twoj_slideshowClass+"__error",loadingClass=_twoj_slideshowClass+"__loading",loadedClass=_twoj_slideshowClass+"__loaded",loadedFullClass=loadedClass+"--full",loadedImgClass=loadedClass+"--img",grabbingClass=_twoj_slideshowClass+"__grabbing",imgClass=_twoj_slideshowClass+"__img",imgFullClass=imgClass+"--full",dotClass=_twoj_slideshowClass+"__dot",thumbClass=_twoj_slideshowClass+"__thumb",thumbBorderClass=thumbClass+"-border",htmlClass=_twoj_slideshowClass+"__html",videoClass=_twoj_slideshowClass+"__video",videoPlayClass=videoClass+"-play",videoCloseClass=videoClass+"-close",captionClass=_twoj_slideshowClass+"__caption",captionWrapClass=_twoj_slideshowClass+"__caption__wrap",spinnerClass=_twoj_slideshowClass+"__spinner",JQUERY_VERSION=$&&$.fn.rbjquer.split(".");if(!JQUERY_VERSION||JQUERY_VERSION[0]<1||1==JQUERY_VERSION[0]&&JQUERY_VERSION[1]<8)throw"twoj_slideshow requires rbjQuer 1.8 or later and will not run without it.";var _={},Modernizr=function(e,t,a){function o(e){w.cssText=e}function n(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function i(e,t){for(var o in e){var n=e[o];if(!s(n,"-")&&w[n]!==a)return"pfx"==t?n:!0}return!1}function r(e,t,o){for(var s in e){var i=t[e[s]];if(i!==a)return o===!1?e[s]:n(i,"function")?i.bind(o||t):i}return!1}function l(e,t,a){var o=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+T.join(o+" ")+o).split(" ");return n(t,"string")||n(t,"undefined")?i(s,t):(s=(e+" "+C.join(o+" ")+o).split(" "),r(s,t,a))}var d,u,c,h="2.6.2",p={},f=t.documentElement,m="modernizr",v=t.createElement(m),w=v.style,g=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),_="Webkit Moz O ms",T=_.split(" "),C=_.toLowerCase().split(" "),S={},$=[],y=$.slice,E=function(e,a,o,n){var s,i,r,l,d=t.createElement("div"),u=t.body,c=u||t.createElement("body");if(parseInt(o,10))for(;o--;)r=t.createElement("div"),r.id=n?n[o]:m+(o+1),d.appendChild(r);return s=["&#173;",'<style id="s',m,'">',e,"</style>"].join(""),d.id=m,(u?d:c).innerHTML+=s,c.appendChild(d),u||(c.style.background="",c.style.overflow="hidden",l=f.style.overflow,f.style.overflow="hidden",f.appendChild(c)),i=a(d,e),u?d.parentNode.removeChild(d):(c.parentNode.removeChild(c),f.style.overflow=l),!!i},x={}.hasOwnProperty;c=n(x,"undefined")||n(x.call,"undefined")?function(e,t){return t in e&&n(e.constructor.prototype[t],"undefined")}:function(e,t){return x.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var a=y.call(arguments,1),o=function(){if(this instanceof o){var n=function(){};n.prototype=t.prototype;var s=new n,i=t.apply(s,a.concat(y.call(arguments)));return Object(i)===i?i:s}return t.apply(e,a.concat(y.call(arguments)))};return o}),S.csstransforms3d=function(){var e=!!l("perspective");return e};for(var I in S)c(S,I)&&(u=I.toLowerCase(),p[u]=S[I](),$.push((p[u]?"":"no-")+u));return p.addTest=function(e,t){if("object"==typeof e)for(var o in e)c(e,o)&&p.addTest(o,e[o]);else{if(e=e.toLowerCase(),p[e]!==a)return p;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(f.className+=" "+(t?"":"no-")+e),p[e]=t}return p},o(""),v=d=null,p._version=h,p._prefixes=g,p._domPrefixes=C,p._cssomPrefixes=T,p.testProp=function(e){return i([e])},p.testAllProps=l,p.testStyles=E,p.prefixed=function(e,t,a){return t?l(e,t,a):l(e,"pfx")},p}(window,document),fullScreenApi={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.cancelFullScreen)fullScreenApi.ok=!0;else for(var i=0,il=browserPrefixes.length;il>i;i++)if(fullScreenApi.prefix=browserPrefixes[i],"undefined"!=typeof document[fullScreenApi.prefix+"CancelFullScreen"]){fullScreenApi.ok=!0;break}fullScreenApi.ok&&(fullScreenApi.event=fullScreenApi.prefix+"fullscreenchange",fullScreenApi.is=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},fullScreenApi.request=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},fullScreenApi.cancel=function(e){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});/**
 * copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
var Spinner,spinnerDefaults={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},spinnerOverride={top:"auto",left:"auto",className:""};!function(e,t){Spinner=t()}(this,function(){function e(e,t){var a,o=document.createElement(e||"div");for(a in t)o[a]=t[a];return o}function t(e){for(var t=1,a=arguments.length;a>t;t++)e.appendChild(arguments[t]);return e}function a(e,t,a,o){var n=["opacity",t,~~(100*e),a,o].join("-"),s=.01+a/o*100,i=Math.max(1-(1-e)/t*(100-s),e),r=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=r&&"-"+r+"-"||"";return h[n]||(p.insertRule("@"+l+"keyframes "+n+"{0%{opacity:"+i+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}100%{opacity:"+i+"}}",p.cssRules.length),h[n]=1),n}function o(e,t){var a,o,n=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),o=0;o<c.length;o++)if(a=c[o]+t,n[a]!==undefined)return a;return n[t]!==undefined?t:void 0}function n(e,t){for(var a in t)e.style[o(e,a)||a]=t[a];return e}function s(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)e[o]===undefined&&(e[o]=a[o])}return e}function i(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function r(e,t){return"string"==typeof e?e:e[t%e.length]}function l(e){return"undefined"==typeof this?new l(e):void(this.opts=s(e||{},l.defaults,f))}function d(){function a(t,a){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',a)}p.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(e,o){function s(){return n(a("group",{coordsize:u+" "+u,coordorigin:-d+" "+-d}),{width:u,height:u})}function i(e,i,l){t(h,t(n(s(),{rotation:360/o.lines*e+"deg",left:~~i}),t(n(a("roundrect",{arcsize:o.corners}),{width:d,height:o.width,left:o.radius,top:-o.width>>1,filter:l}),a("fill",{color:r(o.color,e),opacity:o.opacity}),a("stroke",{opacity:0}))))}var l,d=o.length+o.width,u=2*d,c=2*-(o.width+o.length)+"px",h=n(s(),{position:"absolute",top:c,left:c});if(o.shadow)for(l=1;l<=o.lines;l++)i(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=o.lines;l++)i(l);return t(e,h)},l.prototype.opacity=function(e,t,a,o){var n=e.firstChild,o=o.shadow&&o.lines||0;n&&t+o<n.childNodes.length&&(n=n.childNodes[t+o],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=a))}}var u,c=["webkit","Moz","ms","O"],h={},p=function(){var a=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},s(l.prototype,{spin:function(t){this.stop();var a,o,s=this,r=s.opts,l=s.el=n(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),d=r.radius+r.length+r.width;if(t&&(t.insertBefore(l,t.firstChild||null),o=i(t),a=i(l),n(l,{left:("auto"==r.left?o.x-a.x+(t.offsetWidth>>1):parseInt(r.left,10)+d)+"px",top:("auto"==r.top?o.y-a.y+(t.offsetHeight>>1):parseInt(r.top,10)+d)+"px"})),l.setAttribute("role","progressbar"),s.lines(l,s.opts),!u){var c,h=0,p=(r.lines-1)*(1-r.direction)/2,f=r.fps,m=f/r.speed,v=(1-r.opacity)/(m*r.trail/100),w=m/r.lines;!function g(){h++;for(var e=0;e<r.lines;e++)c=Math.max(1-(h+(r.lines-e)*w)%m*v,r.opacity),s.opacity(l,e*r.direction+p,c,r);s.timeout=s.el&&setTimeout(g,~~(1e3/f))}()}return s},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(o,s){function i(t,a){return n(e(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:t,boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*d+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var l,d=0,c=(s.lines-1)*(1-s.direction)/2;d<s.lines;d++)l=n(e(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:u&&a(s.opacity,s.trail,c+d*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&t(l,n(i("#000","0 0 4px #000"),{top:"2px"})),t(o,t(l,i(r(s.color,d),"0 0 1px rgba(0,0,0,.1)")));return o},opacity:function(e,t,a){t<e.childNodes.length&&(e.childNodes[t].style.opacity=a)}});var m=n(e("group"),{behavior:"url(#default#VML)"});return!o(m,"transform")&&m.adj?d():u=o(m,"animation"),l});var $WINDOW=$(window),$DOCUMENT=$(document),$HTML,$BODY,QUIRKS_FORCE="quirks"===location.hash.replace("#",""),TRANSFORMS3D=Modernizr.csstransforms3d,CSS3=TRANSFORMS3D&&!QUIRKS_FORCE,COMPAT=TRANSFORMS3D||"CSS1Compat"===document.compatMode,FULLSCREEN=fullScreenApi.ok,MOBILE=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),SLOW=!CSS3||MOBILE,ADD_EVENT_LISTENER="addEventListener",MS_POINTER=navigator.msPointerEnabled,WHEEL="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",TOUCH_TIMEOUT=250,TRANSITION_DURATION=300,SCROLL_LOCK_TIMEOUT=1400,AUTOPLAY_INTERVAL=5e3,MARGIN=2,THUMB_SIZE=64,WIDTH=500,HEIGHT=333,STAGE_FRAME_KEY="$stageFrame",NAV_DOT_FRAME_KEY="$navDotFrame",NAV_THUMB_FRAME_KEY="$navThumbFrame",BEZIER=bez([.1,0,.25,1]),MAX_WIDTH=99999,OPTIONS={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:MARGIN,glimpse:0,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:THUMB_SIZE,thumbheight:THUMB_SIZE,thumbmargin:MARGIN,thumbborderwidth:MARGIN,allowfullscreen:!1,fit:"contain",transition:"slide",clicktransition:null,transitionduration:TRANSITION_DURATION,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!1,click:!1,swipe:!1,trackpad:!1,shuffle:!1,direction:"ltr",shadows:!0,spinner:{lines:13,color:"rgba(0, 0, 0, .75)"}},KEYBOARD_OPTIONS={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1},lastEvent,moveEventType,preventEvent,preventEventTimeout;rbjQuer.twoj_slideshow=function($twoj_slideshow,opts){function checkForVideo(){$.each(data,function(e,t){if(!t.i){t.i=dataFrameCount++;var a=findVideoId(t.video,!0);if(a){var o={};t.video=a,t.img||t.thumb?t.thumbsReady=!0:o=getVideoThumbs(t,data,that),updateData(data,{img:o.img,thumb:o.thumb},t.i,that)}}})}function allowKey(e){return o_keyboard[e]||that.fullScreen}function bindGlobalEvents(e){var t="keydown."+_twoj_slideshowClass,a="keydown."+_twoj_slideshowClass+stamp,o="resize."+_twoj_slideshowClass+stamp;e?($DOCUMENT.on(a,function(e){var t,a;$videoPlaying&&27===e.keyCode?(t=!0,unloadVideo($videoPlaying,!0,!0)):(that.fullScreen||opts.keyboard&&!that.index)&&(27===e.keyCode?(t=!0,that.cancelFullScreen()):e.shiftKey&&32===e.keyCode&&allowKey("space")||37===e.keyCode&&allowKey("left")||38===e.keyCode&&allowKey("up")?a="<":32===e.keyCode&&allowKey("space")||39===e.keyCode&&allowKey("right")||40===e.keyCode&&allowKey("down")?a=">":36===e.keyCode&&allowKey("home")?a="<<":35===e.keyCode&&allowKey("end")&&(a=">>")),(t||a)&&stopEvent(e),a&&that.show({index:a,slow:e.altKey,user:!0})}),that.index||$DOCUMENT.off(t).on(t,"textarea, input, select",function(e){!$BODY.hasClass(_fullscreenClass)&&e.stopPropagation()}),$WINDOW.on(o,that.resize)):($DOCUMENT.off(a),$WINDOW.off(o))}function appendElements(e){e!==appendElements.f&&(e?($twoj_slideshow.html("").addClass(_twoj_slideshowClass+" "+stampClass).append($wrap).before($style).before($anchor),addInstance(that)):($wrap.detach(),$style.detach(),$anchor.detach(),$twoj_slideshow.html(twoj_slideshowData.urtext).removeClass(stampClass),hideInstance(that)),bindGlobalEvents(e),appendElements.f=e)}function setData(){data=that.data=data||clone(opts.data)||getDataFromHtml($twoj_slideshow),size=that.size=data.length,!ready.ok&&opts.shuffle&&shuffle(data),checkForVideo(),activeIndex=limitIndex(activeIndex),size&&appendElements(!0)}function stageNoMove(){var e=2>size||$videoPlaying;stageShaftTouchTail.noMove=e||o_fade,stageShaftTouchTail.noSwipe=e||!opts.swipe,!o_transition&&$stageShaft.toggleClass(grabClass,!stageShaftTouchTail.noMove&&!stageShaftTouchTail.noSwipe),MS_POINTER&&$wrap.toggleClass(wrapPanYClass,!stageShaftTouchTail.noSwipe)}function setAutoplayInterval(e){e===!0&&(e=""),opts.autoplay=Math.max(+e||AUTOPLAY_INTERVAL,1.5*o_transitionDuration)}function setOptions(){function e(e,a){t[e?"add":"remove"].push(a)}that.options=opts=optionsToLowerCase(opts),o_fade="crossfade"===opts.transition||"dissolve"===opts.transition,o_loop=opts.loop&&(size>2||o_fade)&&(!o_transition||"slide"!==o_transition),o_transitionDuration=+opts.transitionduration||TRANSITION_DURATION,o_rtl="rtl"===opts.direction,o_keyboard=$.extend({},opts.keyboard&&KEYBOARD_OPTIONS,opts.keyboard);var t={add:[],remove:[]};size>1?(o_nav=opts.nav,o_navTop="top"===opts.navposition,t.remove.push(selectClass),$arrs.toggle(!!opts.arrows)):(o_nav=!1,$arrs.hide()),spinnerStop(),spinner=new Spinner($.extend(spinnerDefaults,opts.spinner,spinnerOverride,{direction:o_rtl?-1:1})),arrsUpdate(),stageWheelUpdate(),opts.autoplay&&setAutoplayInterval(opts.autoplay),o_thumbSide=numberFromMeasure(opts.thumbwidth)||THUMB_SIZE,o_thumbSide2=numberFromMeasure(opts.thumbheight)||THUMB_SIZE,stageWheelTail.ok=navWheelTail.ok=opts.trackpad&&!SLOW,stageNoMove(),extendMeasures(opts,[measures]),o_navThumbs="thumbs"===o_nav,o_navThumbs?(frameDraw(size,"navThumb"),$navFrame=$navThumbFrame,navFrameKey=NAV_THUMB_FRAME_KEY,setStyle($style,$.twoj_slideshow.jst.style({w:o_thumbSide,h:o_thumbSide2,b:opts.thumbborderwidth,m:opts.thumbmargin,s:stamp,q:!COMPAT})),$nav.addClass(navThumbsClass).removeClass(navDotsClass)):"dots"===o_nav?(frameDraw(size,"navDot"),$navFrame=$navDotFrame,navFrameKey=NAV_DOT_FRAME_KEY,$nav.addClass(navDotsClass).removeClass(navThumbsClass)):(o_nav=!1,$nav.removeClass(navThumbsClass+" "+navDotsClass)),o_nav&&(o_navTop?$navWrap.insertBefore($stage):$navWrap.insertAfter($stage),frameAppend.nav=!1,frameAppend($navFrame,$navShaft,"nav")),o_allowFullScreen=opts.allowfullscreen,o_allowFullScreen?($fullscreenIcon.appendTo($stage),o_nativeFullScreen=FULLSCREEN&&"native"===o_allowFullScreen):($fullscreenIcon.detach(),o_nativeFullScreen=!1),e(o_fade,wrapFadeClass),e(!o_fade,wrapSlideClass),e(!opts.captions,wrapNoCaptionsClass),e(o_rtl,wrapRtlClass),e("always"!==opts.arrows,wrapToggleArrowsClass),o_shadows=opts.shadows&&!SLOW,e(!o_shadows,wrapNoShadowsClass),$wrap.addClass(t.add.join(" ")).removeClass(t.remove.join(" ")),lastOptions=$.extend({},opts)}function normalizeIndex(e){return 0>e?(size+e%size)%size:e>=size?e%size:e}function limitIndex(e){return minMaxLimit(e,0,size-1)}function edgeIndex(e){return o_loop?normalizeIndex(e):limitIndex(e)}function getPrevIndex(e){return e>0||o_loop?e-1:!1}function getNextIndex(e){return size-1>e||o_loop?e+1:!1}function setStageShaftMinmaxAndSnap(){stageShaftTouchTail.min=o_loop?-(1/0):-getPosByIndex(size-1,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.max=o_loop?1/0:-getPosByIndex(0,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.snap=measures.w+opts.margin}function setNavShaftMinMax(){navShaftTouchTail.min=Math.min(0,measures.nw-$navShaft.width()),navShaftTouchTail.max=0,$navShaft.toggleClass(grabClass,!(navShaftTouchTail.noMove=navShaftTouchTail.min===navShaftTouchTail.max))}function eachIndex(e,t,a){if("number"==typeof e){e=new Array(e);var o=!0}return $.each(e,function(e,n){if(o&&(n=e),"number"==typeof n){var s=data[normalizeIndex(n)];if(s){var i="$"+t+"Frame",r=s[i];a.call(this,e,n,s,r,i,r&&r.data())}}})}function setMeasures(e,t,a,o){(!measuresSetFLAG||"*"===measuresSetFLAG&&o===startIndex)&&(e=measureIsValid(opts.width)||measureIsValid(e)||WIDTH,t=measureIsValid(opts.height)||measureIsValid(t)||HEIGHT,that.resize({width:e,ratio:opts.ratio||a||e/t},0,o===startIndex?!0:"*"))}function loadImg(e,t,a,o,n){eachIndex(e,t,function(e,s,i,r,l,d){function u(e){var t=normalizeIndex(s);triggerEvent(e,{index:t,src:_,frame:data[t]})}function c(){v.remove(),$.twoj_slideshow.cache[_]="error",i.html&&"stage"===t||!T||T===_?(!_||i.html||f?"stage"===t&&(r.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass(loadedClass),u("load"),setMeasures()):(r.trigger("f:error").removeClass(loadingClass).addClass(errorClass),u("error")),d.state="error",!(size>1&&data[s]===i)||i.html||i.deleted||i.video||f||(i.deleted=!0,that.splice(s,1))):(i[g]=_=T,loadImg([s],t,a,o,!0))}function h(){$.twoj_slideshow.measures[_]=w.measures=$.twoj_slideshow.measures[_]||{width:m.width,height:m.height,ratio:m.width/m.height},setMeasures(w.measures.width,w.measures.height,w.measures.ratio,s),v.off("load error").addClass(imgClass+(f?" "+imgFullClass:"")).prependTo(r),fit(v,a||measures,o||i.fit||opts.fit),$.twoj_slideshow.cache[_]=d.state="loaded",setTimeout(function(){r.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass(loadedClass+" "+(f?loadedFullClass:loadedImgClass)),"stage"===t&&u("load")},5)}function p(){var e=10;waitFor(function(){return!touchedFLAG||!e--&&!SLOW},function(){h()})}if(r){var f=that.fullScreen&&i.full&&i.full!==i.img&&!d.$full&&"stage"===t;if(!d.$img||n||f){var m=new Image,v=$(m),w=v.data();d[f?"$full":"$img"]=v;var g="stage"===t?f?"full":"img":"thumb",_=i[g],T=f?null:i["stage"===t?"thumb":"img"];if("navThumb"===t&&(r=d.$wrap),!_)return void c();$.twoj_slideshow.cache[_]?!function C(){"error"===$.twoj_slideshow.cache[_]?c():"loaded"===$.twoj_slideshow.cache[_]?setTimeout(p,0):setTimeout(C,100)}():($.twoj_slideshow.cache[_]="*",v.on("load",p).on("error",c)),d.state="",m.src=_}}})}function spinnerSpin(e){$spinner.append(spinner.spin().el).appendTo(e)}function spinnerStop(){$spinner.detach(),spinner&&spinner.stop()}function updatetwoj_slideshowState(){var e=that.activeFrame[STAGE_FRAME_KEY];e&&!e.data().state&&(spinnerSpin(e),e.on("f:load f:error",function(){e.off("f:load f:error"),spinnerStop()}))}function frameDraw(e,t){eachIndex(e,t,function(e,a,o,n,s,i){n||(n=o[s]=$wrap[s].clone(),i=n.data(),i.data=o,"stage"===t?(o.html&&$('<div class="'+htmlClass+'"></div>').append(o._html?$(o.html).removeAttr("id").html(o._html):o.html).appendTo(n),o.caption&&$(div(captionClass,div(captionWrapClass,o.caption))).appendTo(n),o.video&&n.addClass(stageFrameVideoClass).append($videoPlay.clone()),$stageFrame=$stageFrame.add(n)):"navDot"===t?$navDotFrame=$navDotFrame.add(n):"navThumb"===t&&(i.$wrap=n.children(":first"),$navThumbFrame=$navThumbFrame.add(n),o.video&&n.append($videoPlay.clone())))})}function callFit(e,t,a){return e&&e.length&&fit(e,t,a)}function stageFramePosition(e){eachIndex(e,"stage",function(e,t,a,o,n,s){if(o){toDetach[STAGE_FRAME_KEY][normalizeIndex(t)]=o.css($.extend({left:o_fade?0:getPosByIndex(t,measures.w,opts.margin,repositionIndex)},o_fade&&getDuration(0))),isDetached(o[0])&&(o.appendTo($stageShaft),unloadVideo(a.$video));var i=a.fit||opts.fit;callFit(s.$img,measures,i),callFit(s.$full,measures,i)}})}function thumbsDraw(e,t){if("thumbs"===o_nav&&!isNaN(e)){var a=-e,o=-e+measures.nw;$navThumbFrame.each(function(){var e=$(this),n=e.data(),s=n.eq,i={h:o_thumbSide2},r="cover";i.w=n.w,n.l+n.w<a||n.l>o||callFit(n.$img,i,r)||t&&loadImg([s],"navThumb",i,r)})}}function frameAppend(e,t,a){if(!frameAppend[a]){var o="nav"===a&&o_navThumbs,n=0;t.append(e.filter(function(){for(var e,t=$(this),a=t.data(),o=0,n=data.length;n>o;o++)if(a.data===data[o]){e=!0,a.eq=o;break}return e||t.remove()&&!1}).sort(function(e,t){return $(e).data().eq-$(t).data().eq}).each(function(){if(o){var e=$(this),t=e.data(),a=Math.round(o_thumbSide2*t.data.thumbratio)||o_thumbSide;t.l=n,t.w=a,e.css({width:a}),n+=a+opts.thumbmargin}})),frameAppend[a]=!0}}function getDirection(e){return e-stageLeft>measures.w/3}function disableDirrection(e){return!(o_loop||activeIndex+e&&activeIndex-size+e||$videoPlaying)}function arrsUpdate(){$arrPrev.toggleClass(arrDisabledClass,disableDirrection(0)),$arrNext.toggleClass(arrDisabledClass,disableDirrection(1))}function stageWheelUpdate(){stageWheelTail.ok&&(stageWheelTail.prevent={"<":disableDirrection(0),">":disableDirrection(1)})}function getNavFrameBounds(e){var t,a,o=e.data();return o_navThumbs?(t=o.l,a=o.w):(t=e.position().left,a=e.width()),{c:t+a/2,min:-t+10*opts.thumbmargin,max:-t+measures.w-a-10*opts.thumbmargin}}function slideThumbBorder(e){var t=that.activeFrame[navFrameKey].data();slide($thumbBorder,{time:.9*e,pos:t.l,width:t.w-2*opts.thumbborderwidth})}function slideNavShaft(e){var t=data[e.guessIndex][navFrameKey];if(t){var a=navShaftTouchTail.min!==navShaftTouchTail.max,o=a&&getNavFrameBounds(that.activeFrame[navFrameKey]),n=a&&(e.keep&&slideNavShaft.l?slideNavShaft.l:minMaxLimit((e.coo||measures.nw/2)-getNavFrameBounds(t).c,o.min,o.max)),s=a&&minMaxLimit(n,navShaftTouchTail.min,navShaftTouchTail.max),i=.9*e.time;slide($navShaft,{time:i,pos:s||0,onEnd:function(){thumbsDraw(s,!0)}}),setShadow($nav,findShadowEdge(s,navShaftTouchTail.min,navShaftTouchTail.max)),slideNavShaft.l=n}}function navUpdate(){deactivateFrames(navFrameKey),toDeactivate[navFrameKey].push(that.activeFrame[navFrameKey].addClass(activeClass))}function deactivateFrames(e){for(var t=toDeactivate[e];t.length;)t.shift().removeClass(activeClass)}function detachFrames(e){var t=toDetach[e];$.each(activeIndexes,function(e,a){delete t[normalizeIndex(a)]}),$.each(t,function(e,a){delete t[e],a.detach()})}function stageShaftReposition(e){repositionIndex=dirtyIndex=activeIndex;var t=that.activeFrame,a=t[STAGE_FRAME_KEY];a&&(deactivateFrames(STAGE_FRAME_KEY),toDeactivate[STAGE_FRAME_KEY].push(a.addClass(activeClass)),e||that.show.onEnd(!0),stop($stageShaft,0,!0),detachFrames(STAGE_FRAME_KEY),stageFramePosition(activeIndexes),setStageShaftMinmaxAndSnap(),setNavShaftMinMax())}function extendMeasures(e,t){e&&$.each(t,function(t,a){a&&$.extend(a,{width:e.width||a.width,height:e.height,minwidth:e.minwidth,maxwidth:e.maxwidth,minheight:e.minheight,maxheight:e.maxheight,ratio:getRatio(e.ratio)})})}function triggerEvent(e,t){$twoj_slideshow.trigger(_twoj_slideshowClass+":"+e,[that,t])}function onTouchStart(){clearTimeout(onTouchEnd.t),touchedFLAG=1,opts.stopautoplayontouch?that.stopAutoplay():pausedAutoplayFLAG=!0}function onTouchEnd(){opts.stopautoplayontouch||(releaseAutoplay(),changeAutoplay()),onTouchEnd.t=setTimeout(function(){touchedFLAG=0},TRANSITION_DURATION+TOUCH_TIMEOUT)}function releaseAutoplay(){pausedAutoplayFLAG=!(!$videoPlaying&&!stoppedAutoplayFLAG)}function changeAutoplay(){if(clearTimeout(changeAutoplay.t),!opts.autoplay||pausedAutoplayFLAG)return void(that.autoplay&&(that.autoplay=!1,triggerEvent("stopautoplay")));that.autoplay||(that.autoplay=!0,triggerEvent("startautoplay"));var e=activeIndex,t=that.activeFrame[STAGE_FRAME_KEY].data();waitFor(function(){return t.state||e!==activeIndex},function(){changeAutoplay.t=setTimeout(function(){pausedAutoplayFLAG||e!==activeIndex||that.show(o_loop?getDirectionSign(!o_rtl):normalizeIndex(activeIndex+(o_rtl?-1:1)))},opts.autoplay)})}function cancelFullScreen(){that.fullScreen&&(that.fullScreen=!1,FULLSCREEN&&fullScreenApi.cancel(twoj_slideshow),$BODY.removeClass(_fullscreenClass),$HTML.removeClass(_fullscreenClass),$twoj_slideshow.removeClass(fullscreenClass).insertAfter($anchor),measures=$.extend({},measuresStash),unloadVideo($videoPlaying,!0,!0),updateTouchTails("x",!1),that.resize(),loadImg(activeIndexes,"stage"),lockScroll(scrollLeft,scrollTop),triggerEvent("fullscreenexit"))}function setShadow(e,t){o_shadows&&(e.removeClass(shadowsLeftClass+" "+shadowsRightClass),t&&!$videoPlaying&&e.addClass(t.replace(/^|\s/g," "+shadowsClass+"--")))}function unloadVideo(e,t,a){t&&($wrap.removeClass(wrapVideoClass),$videoPlaying=!1,stageNoMove()),e&&e!==$videoPlaying&&(e.remove(),triggerEvent("unloadvideo")),a&&(releaseAutoplay(),changeAutoplay())}function toggleControlsClass(e){$wrap.toggleClass(wrapNoControlsClass,e)}function stageCursor(e){if(!stageShaftTouchTail.flow){var t=e?e.pageX:stageCursor.x,a=t&&!disableDirrection(getDirection(t))&&opts.click;stageCursor.p===a||!o_fade&&opts.swipe||!$stage.toggleClass(pointerClass,a)||(stageCursor.p=a,stageCursor.x=t)}}function clickToShow(e){clearTimeout(clickToShow.t),opts.clicktransition&&opts.clicktransition!==opts.transition?(o_transition=opts.transition,that.setOptions({transition:opts.clicktransition}),clickToShow.t=setTimeout(function(){that.show(e)},10)):that.show(e)}function onStageTap(e,t){var a=e.target,o=$(a);o.hasClass(videoPlayClass)?that.playVideo():a===fullscreenIcon?that[(that.fullScreen?"cancel":"request")+"FullScreen"]():$videoPlaying?a===videoClose&&unloadVideo($videoPlaying,!0,!0):t?toggleControlsClass():opts.click&&clickToShow({index:e.shiftKey||getDirectionSign(getDirection(e._x)),slow:e.altKey,user:!0})}function updateTouchTails(e,t){stageShaftTouchTail[e]=navShaftTouchTail[e]=t}function onNavFrameClick(e,t){var a=$(this).data().eq;clickToShow({index:a,slow:e.altKey,user:!0,coo:e._x-$nav.offset().left,time:t})}function reset(){if(setData(),setOptions(),!reset.i){reset.i=!0;var e=opts.startindex;(e||opts.hash&&location.hash)&&(startIndex=getIndexFromHash(e||location.hash.replace(/^#/,""),data,0===that.index||e,e)),activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=startIndex=edgeIndex(startIndex)||0}if(size){if(changeToRtl())return;$videoPlaying&&unloadVideo($videoPlaying,!0),activeIndexes=[],detachFrames(STAGE_FRAME_KEY),that.show({index:activeIndex,time:0,reset:reset.ok}),that.resize()}else that.destroy();reset.ok=!0}function changeToRtl(){return!changeToRtl.f===o_rtl?(changeToRtl.f=o_rtl,activeIndex=size-1-activeIndex,that.reverse(),!0):void 0}function ready(){ready.ok||(ready.ok=!0,triggerEvent("ready"))}$HTML=$HTML||$("html"),$BODY=$BODY||$("body");var that=this,stamp=$.now(),stampClass=_twoj_slideshowClass+stamp,twoj_slideshow=$twoj_slideshow[0],data,dataFrameCount=1,twoj_slideshowData=$twoj_slideshow.data(),size,$style=$("<style></style>"),$anchor=$(div(hiddenClass)),$wrap=$(div(wrapClass)),$stage=$(div(stageClass)).appendTo($wrap),stage=$stage[0],$stageShaft=$(div(stageShaftClass)).appendTo($stage),$stageFrame=$(),$arrPrev=$(div(arrClass+" "+arrPrevClass)),$arrNext=$(div(arrClass+" "+arrNextClass)),$arrs=$arrPrev.add($arrNext).appendTo($stage),$navWrap=$(div(navWrapClass)),$nav=$(div(navClass)).appendTo($navWrap),$navShaft=$(div(navShaftClass)).appendTo($nav),$navFrame,$navDotFrame=$(),$navThumbFrame=$(),stageShaftData=$stageShaft.data(),navShaftData=$navShaft.data(),$thumbBorder=$(div(thumbBorderClass)).appendTo($navShaft),$fullscreenIcon=$(div(fullscreenIconClass)),fullscreenIcon=$fullscreenIcon[0],$videoPlay=$(div(videoPlayClass)),$videoClose=$(div(videoCloseClass)).appendTo($stage),videoClose=$videoClose[0],spinner,$spinner=$(div(spinnerClass)),$videoPlaying,activeIndex=!1,activeFrame,activeIndexes,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,startIndex,o_loop,o_nav,o_navThumbs,o_navTop,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,o_transitionDuration,o_transition,o_shadows,o_rtl,o_keyboard,lastOptions={},measures={},measuresSetFLAG,stageShaftTouchTail={},stageWheelTail={},navShaftTouchTail={},navWheelTail={},scrollTop,scrollLeft,showedFLAG,pausedAutoplayFLAG,stoppedAutoplayFLAG,toDeactivate={},toDetach={},measuresStash,touchedFLAG,hoverFLAG,navFrameKey,stageLeft=0,fadeStack=[];$wrap[STAGE_FRAME_KEY]=$(div(stageFrameClass)),$wrap[NAV_THUMB_FRAME_KEY]=$(div(navFrameClass+" "+navFrameThumbClass,div(thumbClass))),$wrap[NAV_DOT_FRAME_KEY]=$(div(navFrameClass+" "+navFrameDotClass,div(dotClass))),toDeactivate[STAGE_FRAME_KEY]=[],toDeactivate[NAV_THUMB_FRAME_KEY]=[],toDeactivate[NAV_DOT_FRAME_KEY]=[],toDetach[STAGE_FRAME_KEY]={},$wrap.addClass(CSS3?wrapCss3Class:wrapCss2Class),twoj_slideshowData.twoj_slideshow=this,that.startAutoplay=function(e){return that.autoplay?this:(pausedAutoplayFLAG=stoppedAutoplayFLAG=!1,setAutoplayInterval(e||opts.autoplay),changeAutoplay(),this)},that.stopAutoplay=function(){return that.autoplay&&(pausedAutoplayFLAG=stoppedAutoplayFLAG=!0,changeAutoplay()),this},that.show=function(e){var t;"object"!=typeof e?(t=e,e={}):t=e.index,t=">"===t?dirtyIndex+1:"<"===t?dirtyIndex-1:"<<"===t?0:">>"===t?size-1:t,t=isNaN(t)?getIndexFromHash(t,data,!0):t,t="undefined"==typeof t?activeIndex||0:t,that.activeIndex=activeIndex=edgeIndex(t),prevIndex=getPrevIndex(activeIndex),nextIndex=getNextIndex(activeIndex),activeIndexes=[activeIndex,prevIndex,nextIndex],dirtyIndex=o_loop?t:activeIndex;var a=Math.abs(lastActiveIndex-dirtyIndex),o=getNumber(e.time,function(){return Math.min(o_transitionDuration*(1+(a-1)/12),2*o_transitionDuration)}),n=e.overPos;e.slow&&(o*=10),that.activeFrame=activeFrame=data[activeIndex],unloadVideo($videoPlaying,activeFrame.i!==data[normalizeIndex(repositionIndex)].i),frameDraw(activeIndexes,"stage"),stageFramePosition(SLOW?[dirtyIndex]:[dirtyIndex,getPrevIndex(dirtyIndex),getNextIndex(dirtyIndex)]),updateTouchTails("go",!0),e.reset||triggerEvent("show",{user:e.user,time:o}),pausedAutoplayFLAG=!0;var s=that.show.onEnd=function(t){if(!s.ok){if(s.ok=!0,t||stageShaftReposition(!0),!e.reset&&(triggerEvent("showend",{user:e.user}),!t&&o_transition&&o_transition!==opts.transition))return that.setOptions({transition:o_transition}),void(o_transition=!1);updatetwoj_slideshowState(),loadImg(activeIndexes,"stage"),updateTouchTails("go",!1),stageWheelUpdate(),stageCursor(),releaseAutoplay(),changeAutoplay()}};if(o_fade){var i=activeFrame[STAGE_FRAME_KEY],r=activeIndex!==lastActiveIndex?data[lastActiveIndex][STAGE_FRAME_KEY]:null;fade(i,r,$stageFrame,{time:o,method:opts.transition,onEnd:s},fadeStack)}else slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures.w,opts.margin,repositionIndex),overPos:n,time:o,onEnd:s,_001:!0});if(arrsUpdate(),o_nav){navUpdate();var l=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1));slideNavShaft({time:o,coo:l!==activeIndex&&e.coo,guessIndex:"undefined"!=typeof e.coo?l:activeIndex,keep:e.reset}),o_navThumbs&&slideThumbBorder(o)}return showedFLAG="undefined"!=typeof lastActiveIndex&&lastActiveIndex!==activeIndex,lastActiveIndex=activeIndex,opts.hash&&showedFLAG&&!that.eq&&setHash(activeFrame.id||activeIndex+1),this},that.requestFullScreen=function(){return o_allowFullScreen&&!that.fullScreen&&(scrollTop=$WINDOW.scrollTop(),scrollLeft=$WINDOW.scrollLeft(),lockScroll(0,0),updateTouchTails("x",!0),measuresStash=$.extend({},measures),$twoj_slideshow.addClass(fullscreenClass).appendTo($BODY.addClass(_fullscreenClass)),$HTML.addClass(_fullscreenClass),unloadVideo($videoPlaying,!0,!0),that.fullScreen=!0,o_nativeFullScreen&&fullScreenApi.request(twoj_slideshow),that.resize(),loadImg(activeIndexes,"stage"),updatetwoj_slideshowState(),triggerEvent("fullscreenenter")),this},that.cancelFullScreen=function(){return o_nativeFullScreen&&fullScreenApi.is()?fullScreenApi.cancel(document):cancelFullScreen(),this},document.addEventListener&&document.addEventListener(fullScreenApi.event,function(){!data||fullScreenApi.is()||$videoPlaying||cancelFullScreen()},!1),that.resize=function(e){if(!data)return this;extendMeasures(that.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:optionsToLowerCase(e),[measures,that.fullScreen||opts]);var t=arguments[1]||0,a=arguments[2],o=measures.width,n=measures.height,s=measures.ratio,i=$WINDOW.height()-(o_nav?$nav.height():0);return measureIsValid(o)&&($wrap.addClass(wrapOnlyActiveClass).css({width:o,minWidth:measures.minwidth||0,maxWidth:measures.maxwidth||MAX_WIDTH}),o=measures.W=measures.w=$wrap.width(),measures.nw=o_nav&&numberFromWhatever(opts.navwidth,o)||o,opts.glimpse&&(measures.w-=Math.round(2*(numberFromWhatever(opts.glimpse,o)||0))),$stageShaft.css({width:measures.w,marginLeft:(measures.W-measures.w)/2}),n=numberFromWhatever(n,i),n=n||s&&o/s,n&&(o=Math.round(o),n=measures.h=Math.round(minMaxLimit(n,numberFromWhatever(measures.minheight,i),numberFromWhatever(measures.maxheight,i))),$stage.stop().animate({width:o,height:n},t,function(){$wrap.removeClass(wrapOnlyActiveClass)}),stageShaftReposition(),o_nav&&($nav.stop().animate({width:measures.nw},t),slideNavShaft({guessIndex:activeIndex,time:t,keep:!0}),o_navThumbs&&frameAppend.nav&&slideThumbBorder(t)),measuresSetFLAG=a||!0,ready())),stageLeft=$stage.offset().left,this},that.setOptions=function(e){return $.extend(opts,e),reset(),this},that.shuffle=function(){return data&&shuffle(data)&&reset(),this},that.destroy=function(){return that.cancelFullScreen(),that.stopAutoplay(),data=that.data=null,appendElements(),activeIndexes=[],detachFrames(STAGE_FRAME_KEY),this},that.playVideo=function(){var e=that.activeFrame,t=e.video,a=activeIndex;return"object"==typeof t&&e.videoReady&&(o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen(),waitFor(function(){return!fullScreenApi.is()||a!==activeIndex},function(){a===activeIndex&&(e.$video=e.$video||$($.twoj_slideshow.jst.video(t)),e.$video.appendTo(e[STAGE_FRAME_KEY]),$wrap.addClass(wrapVideoClass),$videoPlaying=e.$video,stageNoMove(),triggerEvent("loadvideo"))})),this},that.stopVideo=function(){return unloadVideo($videoPlaying,!0,!0),this},$stage.on("mousemove",stageCursor),stageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouchStart,onMove:function(e,t){setShadow($stage,t.edge)},onTouchEnd:onTouchEnd,onEnd:function(result){if(setShadow($stage),!(result.moved||result.control||0!=result.pos||0!=result.newPos||"twoj_slideshow__html"!=result.startEvent.target.className&&"twoj_slideshow__img"!=result.startEvent.target.className)){var link=twoj_slideshowData.twoj_slideshow.activeFrame.link,link_targer=twoj_slideshowData.twoj_slideshow.activeFrame.link_targer;if("undefined"!=typeof link&&""!=link){if("javascript"!=link_targer)return"_blank"!=link_targer&&(link_targer="_self"),void window.open(link,link_targer);eval(link)}}var toggleControlsFLAG=(MS_POINTER&&!hoverFLAG||result.touch)&&opts.arrows&&"always"!==opts.arrows;if(result.moved||toggleControlsFLAG&&result.pos!==result.newPos&&!result.control){var index=getIndexByPos(result.newPos,measures.w,opts.margin,repositionIndex);that.show({index:index,time:o_fade?o_transitionDuration:result.time,overPos:result.overPos,user:!0})}else result.aborted||result.control||onStageTap(result.startEvent,toggleControlsFLAG)},_001:!0,timeLow:1,timeHigh:1,friction:2,select:"."+selectClass+", ."+selectClass+" *",$wrap:$stage}),navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouchStart,onMove:function(e,t){setShadow($nav,t.edge)},onTouchEnd:onTouchEnd,onEnd:function(e){function t(){slideNavShaft.l=e.newPos,releaseAutoplay(),changeAutoplay(),thumbsDraw(e.newPos,!0)}if(e.moved)e.pos!==e.newPos?(pausedAutoplayFLAG=!0,slide($navShaft,{time:e.time,pos:e.newPos,overPos:e.overPos,onEnd:t}),thumbsDraw(e.newPos),o_shadows&&setShadow($nav,findShadowEdge(e.newPos,navShaftTouchTail.min,navShaftTouchTail.max))):t();else{var a=e.$target.closest("."+navFrameClass,$navShaft)[0];a&&onNavFrameClick.call(a,e.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav}),stageWheelTail=wheel($stage,{shift:!0,onEnd:function(e,t){onTouchStart(),onTouchEnd(),that.show({index:t,slow:e.altKey})}}),navWheelTail=wheel($nav,{onEnd:function(e,t){onTouchStart(),onTouchEnd();var a=stop($navShaft)+.25*t;$navShaft.css(getTranslate(minMaxLimit(a,navShaftTouchTail.min,navShaftTouchTail.max))),o_shadows&&setShadow($nav,findShadowEdge(a,navShaftTouchTail.min,navShaftTouchTail.max)),navWheelTail.prevent={"<":a>=navShaftTouchTail.max,">":a<=navShaftTouchTail.min},clearTimeout(navWheelTail.t),navWheelTail.t=setTimeout(function(){thumbsDraw(a,!0)},TOUCH_TIMEOUT),thumbsDraw(a)}}),$wrap.hover(function(){setTimeout(function(){touchedFLAG||(hoverFLAG=!0,toggleControlsClass(!hoverFLAG))},0)},function(){hoverFLAG&&(hoverFLAG=!1,toggleControlsClass(!hoverFLAG))}),smartClick($arrs,function(e){stopEvent(e),clickToShow({index:$arrs.index(this)?">":"<",slow:e.altKey,user:!0})},{onStart:function(){onTouchStart(),stageShaftTouchTail.control=!0},onTouchEnd:onTouchEnd
}),$.each("load push pop shift unshift reverse sort splice".split(" "),function(e,t){that[t]=function(){return data=data||[],"load"!==t?Array.prototype[t].apply(data,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(data=clone(arguments[0])),reset(),that}}),reset()},$.fn.twoj_slideshow=function(e){return this.each(function(){var t=this,a=$(this),o=a.data(),n=o.twoj_slideshow;n?n.setOptions(e):waitFor(function(){return!isHidden(t)},function(){o.urtext=a.html(),new $.twoj_slideshow(a,$.extend({},OPTIONS,window.twoj_slideshowDefaults,e,o))})})},$.twoj_slideshow.instances=[],$.twoj_slideshow.cache={},$.twoj_slideshow.measures={},$=$||{},$.twoj_slideshow=$.twoj_slideshow||{},$.twoj_slideshow.jst=$.twoj_slideshow.jst||{},$.twoj_slideshow.jst.style=function(e){{var t,a="";_.escape}return a+=".twoj_slideshow"+(null==(t=e.s)?"":t)+" .twoj_slideshow__nav--thumbs .twoj_slideshow__nav__frame{\npadding:"+(null==(t=e.m)?"":t)+"px;\nheight:"+(null==(t=e.h)?"":t)+"px}\n.twoj_slideshow"+(null==(t=e.s)?"":t)+" .twoj_slideshow__thumb-border{\nheight:"+(null==(t=e.h-e.b*(e.q?0:2))?"":t)+"px;\nborder-width:"+(null==(t=e.b)?"":t)+"px;\nmargin-top:"+(null==(t=e.m)?"":t)+"px}"},$.twoj_slideshow.jst.video=function(e){function t(){a+=o.call(arguments,"")}var a="",o=(_.escape,Array.prototype.join);return a+='<div class="twoj_slideshow__video"><iframe src="',t(("youtube"==e.type?"http://youtube.com/embed/"+e.id+"?autoplay=1":"vimeo"==e.type?"http://player.vimeo.com/video/"+e.id+"?autoplay=1&badge=0":e.id)+(e.s&&"custom"!=e.type?"&"+e.s:"")),a+='" frameborder="0" allowfullscreen></iframe></div>'},$(function(){$("."+_twoj_slideshowClass+':not([data-auto="false"])').twoj_slideshow()})}(window,document,location,"undefined"!=typeof rbjQuer&&rbjQuer),function(e){rbjQuer(".twoj_slideshow").each(function(){var e=window[rbjQuer(this).data("options")],t=rbjQuer.extend({},e);rbjQuer(this).twoj_slideshow(t)})}(rbjQuer);